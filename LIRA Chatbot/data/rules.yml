version: '3.1'

rules:
  # General
  - rule: User wants to avail a service
    steps:
      - intent: avail_service
      - action: utter_ask_service_type

  # Sample Processing
  - rule: User selects sample processing service
    steps:
      - intent: select_service
      - slot_was_set:
          - service: sample processing
      - action: avail_sample_processing_form
      - active_loop: avail_sample_processing_form # Activate the form for Sample Processing

  - rule: Submit sample processing form
    condition:
      - active_loop: avail_sample_processing_form
    steps:
      - action: avail_sample_processing_form
      - active_loop: null # End the form after submission
      - action: utter_thanks

  # Use of Facility
  - rule: User selects use of facility service
    steps:
      - intent: select_service
      - slot_was_set:
          - service: use of facility
      - action: use_facility_form
      - active_loop: use_facility_form # Activate the form for Use of Facility

  - rule: Submit use of facility form
    condition:
      - active_loop: use_facility_form
    steps:
      - action: use_facility_form
      - active_loop: null # End the form after submission
      - action: utter_thanks
