version: '3.1'

intents:
  # General
  - avail_service
  - select_service
  - first_name
  - last_name
  - affiliation
  - email

  # Sample Processing
  - select_lab_partner
  - select_date

  # Use of Facility
  - select_facility
  - select_start_date
  - select_end_date

entities:
  # General
  - first_name
  - last_name
  - affiliation
  - email
  - service

  # Sample Processing
  - lab_partner
  - date

  # Use of Facility
  - facility
  - start_date
  - end_date

slots:
  first_name:
    type: text
    mappings:
      - type: from_entity
        entity: first_name
  last_name:
    type: text
    mappings:
      - type: from_entity
        entity: last_name
  affiliation:
    type: text
    mappings:
      - type: from_entity
        entity: affiliation
  email:
    type: text
    mappings:
      - type: from_entity
        entity: email
  service:
    type: categorical
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: service
    values:
      - Sample Processing
      - Use of Facility
  lab_partner:
    type: categorical
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: lab_partner
    values:
      - Applied Chemistry
      - Biology
      - Foods, Feeds, and Functional Nutrition
      - Material Science and Nanotechnology
      - Microbiology and Bioengineering
  facility:
    type: categorical
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: facility
    values:
      - Audio/Visual Room
      - Collaboration Room
  date:
    type: text
    mappings:
      - type: from_entity
        entity: date
  start_date:
    type: text
    mappings:
      - type: from_entity
        entity: start_date
  end_date:
    type: text
    mappings:
      - type: from_entity
        entity: end_date

forms:
  # Sample Processing
  avail_sample_processing_form:
    required_slots:
      - lab_partner
      - date
      - first_name
      - last_name
      - affiliation
      - email

  # Use of Facility
  use_facility_form:
    required_slots:
      - facility
      - start_date
      - end_date
      - first_name
      - last_name
      - affiliation
      - email

responses:
  # General
  utter_ask_service_type:
    - text: 'What kind of service would you like to avail?'
      buttons:
        - title: 'Sample Processing'
          payload: '/select_service{"service": "Sample Processing"}'
        - title: 'Use of Facility'
          payload: '/select_service{"service": "Use of Facility"}'

  utter_ask_first_name:
    - text: 'What is your first name?'

  utter_ask_last_name:
    - text: 'What is your last name?'

  utter_ask_affiliation:
    - text: 'What is your affiliation?'

  utter_ask_email:
    - text: 'What is your email?'

  utter_thanks:
    - text: 'Thank you!'

  # Sample Processing
  utter_ask_lab_partner:
    - text: 'What lab will you be partnering with?'
      buttons:
        - title: 'Applied Chemistry'
          payload: '/select_lab_partner{"lab_partner": "Applied Chemistry"}'
        - title: 'Biology'
          payload: '/select_lab_partner{"lab_partner": "Biology"}'
        - title: 'Foods, Feeds, and Functional Nutrition (Foods)'
          payload: '/select_lab_partner{"lab_partner": "Foods, Feeds, and Functional Nutrition"}'
        - title: 'Material Science and Nanotechnology'
          payload: '/select_lab_partner{"lab_partner": "Material Science and Nanotechnology"}'
        - title: 'Microbiology and Bioengineering'
          payload: '/select_lab_partner{"lab_partner": "Microbiology and Bioengineering"}'

  utter_ask_date:
    - text: 'When are you availing sample processing?'

  # Use of Facility
  utter_ask_facility:
    - text: 'What facility will you be using?'
      buttons:
        - title: 'Audio/Visual Room'
          payload: '/select_facility{"facility": "Audio/Visual Room"}'
        - title: 'Collaboration Room'
          payload: '/select_facility{"facility": "Collaboration Room"}'

  utter_ask_start_date:
    - text: 'When you will start using the facility?'

  utter_ask_end_date:
    - text: 'When you will stop using the facility?'

actions:
  - action_save_service_request_to_csv

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
